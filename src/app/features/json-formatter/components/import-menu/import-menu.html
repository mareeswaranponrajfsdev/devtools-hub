<div class="import-menu">
  
  <!-- Trigger Button -->
  <button 
    class="import-trigger"
    (click)="toggleMenu()"
    [class.active]="isOpen()"
    title="Import JSON">
    <i class="fa-solid fa-file-import"></i>
  </button>

  <!-- Dropdown Menu -->
  @if (isOpen()) {
    <div class="import-dropdown">
      
      <!-- File Input (hidden) -->
      <input 
        #fileInput
        type="file" 
        accept=".json,.txt"
        style="display: none;"
        (change)="onFileSelect($event, 'file')">

      <!-- CSV Input (hidden) -->
      <input 
        #csvInput
        type="file" 
        accept=".csv"
        style="display: none;"
        (change)="onFileSelect($event, 'csv')">

      <!-- Menu Items -->
      <button class="menu-item" (click)="fileInput.click()">
        <i class="fa-solid fa-folder-open"></i>
        <div class="menu-item-content">
          <span class="menu-item-title">Open from File</span>
          <span class="menu-item-desc">Browse local files</span>
        </div>
      </button>

      <button class="menu-item" (click)="fileInput.click()">
        <i class="fa-solid fa-hard-drive"></i>
        <div class="menu-item-content">
          <span class="menu-item-title">Open from Disk</span>
          <span class="menu-item-desc">Select JSON file</span>
        </div>
      </button>

      <button class="menu-item" (click)="openUrlDialog()">
        <i class="fa-solid fa-globe"></i>
        <div class="menu-item-content">
          <span class="menu-item-title">Open from URL</span>
          <span class="menu-item-desc">Fetch from internet</span>
        </div>
      </button>

      <div class="menu-divider"></div>

      <button class="menu-item" (click)="csvInput.click()">
        <i class="fa-solid fa-table"></i>
        <div class="menu-item-content">
          <span class="menu-item-title">Import CSV</span>
          <span class="menu-item-desc">Convert to JSON</span>
        </div>
      </button>

    </div>
  }

  <!-- URL Dialog -->
  @if (showUrlDialog()) {
    <div class="url-dialog-overlay" (click)="closeUrlDialog()">
      <div class="url-dialog" (click)="$event.stopPropagation()">
        
        <div class="dialog-header">
          <h3>Import from URL</h3>
          <button class="close-btn" (click)="closeUrlDialog()">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <div class="dialog-body">
          <label for="url-input">Enter JSON URL:</label>
          <input 
            id="url-input"
            type="text" 
            class="url-input"
            [(ngModel)]="urlInput"
            (keydown)="onUrlKeydown($event)"
            placeholder="https://api.example.com/data.json">
          
          <p class="dialog-hint">
            <i class="fa-solid fa-circle-info"></i>
            The URL must support CORS or be publicly accessible
          </p>
        </div>

        <div class="dialog-footer">
          <button class="btn-cancel" (click)="closeUrlDialog()">
            Cancel
          </button>
          <button 
            class="btn-import" 
            (click)="submitUrl()"
            [disabled]="!urlInput.trim()">
            <i class="fa-solid fa-download"></i>
            Import
          </button>
        </div>

      </div>
    </div>
  }

</div>
