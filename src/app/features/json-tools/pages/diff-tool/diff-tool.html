<div class="container">
  
  <!-- Header -->
  <div class="text-center mb-5">
    <h1 class="fw-bold mb-3">JSON Diff & Compare Tool</h1>
    <p class="text-muted">
      Compare two JSON files side-by-side and highlight the differences
    </p>
  </div>

  <!-- Action Buttons -->
  <div class="d-flex gap-2 mb-4 justify-content-center flex-wrap">
    <button 
      type="button"
      class="btn btn-primary"
      (click)="compareLists()">
      <i class="fa-solid fa-code-compare me-2"></i>
      Compare JSON
    </button>
    <button 
      type="button"
      class="btn btn-outline-secondary"
      (click)="loadSample()">
      <i class="fa-solid fa-file-code me-2"></i>
      Load Sample
    </button>
    <button 
      type="button"
      class="btn btn-outline-danger"
      (click)="clear()">
      <i class="fa-solid fa-trash me-2"></i>
      Clear All
    </button>
  </div>

  <!-- Error Message -->
  <div *ngIf="error()" class="alert alert-danger mb-4">
    <i class="fa-solid fa-triangle-exclamation me-2"></i>
    {{ error() }}
  </div>

  <!-- Diff Summary -->
  <div *ngIf="differences().length > 0" class="diff-summary mb-4">
    <div class="row g-3">
      <div class="col-md-4">
        <div class="summary-card added">
          <i class="fa-solid fa-plus-circle"></i>
          <div class="summary-content">
            <div class="summary-count">{{ getDiffCount('added') }}</div>
            <div class="summary-label">Added</div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="summary-card removed">
          <i class="fa-solid fa-minus-circle"></i>
          <div class="summary-content">
            <div class="summary-count">{{ getDiffCount('removed') }}</div>
            <div class="summary-label">Removed</div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="summary-card modified">
          <i class="fa-solid fa-pencil"></i>
          <div class="summary-content">
            <div class="summary-count">{{ getDiffCount('modified') }}</div>
            <div class="summary-label">Modified</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Side-by-Side Editors -->
  <div class="row g-4 mb-4">
    
    <!-- Left JSON -->
    <div class="col-lg-6">
      <div class="card h-100">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fa-solid fa-file-code me-2"></i>
            JSON 1 (Original)
          </h5>
        </div>
        <div class="card-body">
          <textarea 
            class="form-control code-input"
            [(ngModel)]="leftJson"
            placeholder='Paste your first JSON here...'
            rows="20"></textarea>
        </div>
      </div>
    </div>

    <!-- Right JSON -->
    <div class="col-lg-6">
      <div class="card h-100">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fa-solid fa-file-code me-2"></i>
            JSON 2 (Modified)
          </h5>
        </div>
        <div class="card-body">
          <textarea 
            class="form-control code-input"
            [(ngModel)]="rightJson"
            placeholder='Paste your second JSON here...'
            rows="20"></textarea>
        </div>
      </div>
    </div>

  </div>

  <!-- Differences Table -->
  <div *ngIf="differences().length > 0" class="card">
    <div class="card-header">
      <h5 class="mb-0">
        <i class="fa-solid fa-list me-2"></i>
        Differences ({{ differences().length }})
      </h5>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover mb-0 diff-table">
          <thead>
            <tr>
              <th>Path</th>
              <th>Status</th>
              <th>Original Value</th>
              <th>New Value</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let diff of differences()" [class]="'diff-row diff-' + diff.type">
              <td class="path-cell">
                <code>{{ diff.path }}</code>
              </td>
              <td class="status-cell">
                <span class="badge" [class]="'badge-' + diff.type">
                  <i class="fa-solid" 
                     [class.fa-plus]="diff.type === 'added'"
                     [class.fa-minus]="diff.type === 'removed'"
                     [class.fa-pencil]="diff.type === 'modified'"
                     [class.fa-check]="diff.type === 'unchanged'"></i>
                  {{ diff.type }}
                </span>
              </td>
              <td class="value-cell">
                <pre *ngIf="diff.type !== 'added'" class="value-content">{{ formatValue(diff.leftValue) }}</pre>
                <span *ngIf="diff.type === 'added'" class="text-muted">-</span>
              </td>
              <td class="value-cell">
                <pre *ngIf="diff.type !== 'removed'" class="value-content">{{ formatValue(diff.rightValue) }}</pre>
                <span *ngIf="diff.type === 'removed'" class="text-muted">-</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="differences().length === 0 && leftJson() && rightJson() && !error()" class="empty-state">
    <i class="fa-solid fa-check-circle fa-3x mb-3 text-success"></i>
    <h5>No Differences Found</h5>
    <p class="text-muted">Both JSON files are identical</p>
  </div>

</div>
